\subsection*{Propozycja dokumentacji funkcjonalnej}

Fragmenty oznaczone kursywą to funkcjonalności których nie jestem pewien (czy damy radę, czy warto etc)

\subsubsection*{Budowa programu}

Aplikacja będzie się składać z dwóch modułów, nazwanych roboczo Klient i Serwer


\begin{DoxyItemize}
\item Klient \begin{DoxyVerb}  * Program, którego zadaniem jest komunikacja z użytkownikiem 

  * Na początku wyświetla okno z opcjami (zwane dalej ekranem startowym), w którym użytkownik może dobrać pewne parametry „rozgrywki” 

  * Następnie uruchamia Serwer i przesyła mu zebrane dane, wtedy rozpoczyna się właściwa symulacja 

  * Podczas symulacji Klient odbiera od Serwera informacje o obecnych wynikach symulacji i na bieżąco wyświetla graficzną planszę oraz wysyła Serwerowi informacje o kliknięciach użytkownika (w czasie symulacji użytkownik może przyspieszać, zwalniać lub wstrzymywać symulację) 

  * Do wyświetlania planszy klient używa biblioteki OpenGL 
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyItemize}
\item Serwer \begin{DoxyVerb}  * Program, którego zadaniem jest obliczać kolejne kroki symulacji z zadaną częstotliwością i wysyłać wyniki obliczeń do klienta

  * Serwer może także przyspieszać, zwalniać lub wstrzymywać symulację na żądanie użytkownika (przekazywane za pośrednictwem klienta)
\end{DoxyVerb}

\end{DoxyItemize}

Klient i serwer komunikują się za pomocą współdzielonej pamięci, która jest zrealizowana przy pomocy biblioteki Boost\-::\-Interprocess

\subsubsection*{Świat gry}

Symulacja rozgrywa się na prostokątnej planszy, której wymiary ustala użytkownik na ekranie startowym Początkowo obiekty zostają umieszczone w sposób losowy, ale z ograniczeniami opisanymi niżej. Rodzaje obiektów\-:


\begin{DoxyItemize}
\item osobnik (roślinożerca lub drapieżnik) \begin{DoxyVerb}  * posiada zestaw indywidualnych cech; stanowi punkt (nie ma wymiarów), może się poruszać
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyItemize}
\item drzewo \begin{DoxyVerb}  * źródło pożywienia dla roślinożerców; stanowi punkt (nie ma wymiarów) 
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyItemize}
\item wodopój \begin{DoxyVerb}  * źródło wody dla osobników; stanowi punkt (nie ma wymiarów) 
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyItemize}
\item jaskinia \begin{DoxyVerb}  * miejsce, w którym osobniki mogą spać; stanowi punkt (nie ma wymiarów) 
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyItemize}
\item skały \begin{DoxyVerb}  * obszar na planszy, po którym osobniki nie mogą chodzić, stanowi koło o promieniu 5 jednostek; takie koła mogą się częściowo nakładać, tworząc większe struktury
\end{DoxyVerb}

\end{DoxyItemize}

\subsubsection*{Cechy (parametry) osobników}

Każdy osobnik posiada zestaw indywidualnych cech, ustalanych w momencie narodzin (liczby całkowite)\-:


\begin{DoxyItemize}
\item Zasięg widzenia (ozn R), R należy do \mbox{[}5, 100\mbox{]}
\end{DoxyItemize}


\begin{DoxyItemize}
\item Szybkość biegu (V), V należy do \mbox{[}5, 100\mbox{]}
\end{DoxyItemize}


\begin{DoxyItemize}
\item Odporność na głód (F), F należy do \mbox{[}5, 100\mbox{]}
\end{DoxyItemize}


\begin{DoxyItemize}
\item Odporność na pragnienie (W), W należy do \mbox{[}5, 100\mbox{]}
\end{DoxyItemize}


\begin{DoxyItemize}
\item Wytrzymałość \mbox{[}odporność na zmęczenie\mbox{]} (S), S należy do \mbox{[}5, 100\mbox{]}
\end{DoxyItemize}


\begin{DoxyItemize}
\item Wydajność reprodukcyjna (P), P należy do \mbox{[}5, 100\mbox{]}
\end{DoxyItemize}


\begin{DoxyItemize}
\item Maksymalny czas życia (L), L należy do \mbox{[}5, 100\mbox{]}
\end{DoxyItemize}


\begin{DoxyItemize}
\item Płeć (X), X należy do \{„\-F”, „\-M”\}
\end{DoxyItemize}

\subsubsection*{Zależności}


\begin{DoxyItemize}
\item Indywidualne cechy osobnika (z wyjątkiem płci) mają tę własność, że „więcej = lepiej” Spełniają one warunek\-: {\ttfamily R+\-V+\-F+\-W+\-S+\-P = 200}
\end{DoxyItemize}


\begin{DoxyItemize}
\item A także parametry chwilowe (liczby rzeczywiste, zmieniające się w sposób pseudo-\/ciągły)\-:
\end{DoxyItemize}

\paragraph*{Poziom najedzenia}

Poziom najedzenia (ozn f), f należy do \mbox{[}0, F\mbox{]}, maleje w stałym tempie


\begin{DoxyItemize}
\item Jeśli poziom najedzenia spadnie poniżej połowy (f należy do \mbox{[}0, ½\-F\mbox{]}), to osobnik znajduje się w stanie „głodny”
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli głodny osobnik dotrze do drzewa (roślinożerca) lub złapie roślinożercę (drapieżnik) jego poziom napojenia natychmiast rośnie do poziomu F
\end{DoxyItemize}


\begin{DoxyItemize}
\item Roślinożerca zjedzony przez drapieżnika znika z gry
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli poziom najedzenia spadnie do zera, osobnik umiera z głodu
\end{DoxyItemize}

\paragraph*{Poziom napojenia}


\begin{DoxyItemize}
\item Poziom napojenia (w) w należy do \mbox{[}0, W\mbox{]}, maleje w stałym tempie
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli poziom napojenia spadnie poniżej połowy (w należy do \mbox{[}0, ½w\mbox{]}), to osobnik znajduje się w stanie „spragniony”
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli spragniony osobnik dotrze do wodopoju, jego poziom napojenia natychmiast rośnie do poziomu W
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli poziom napojenia spadnie do zera, osobnik umiera z pragnienia
\end{DoxyItemize}

\paragraph*{Poziom energii}

Poziom energii (wypoczęcia) (s) s należy do \mbox{[}0, S\mbox{]}, maleje w zmiennym tempie


\begin{DoxyItemize}
\item Jeśli poziom energii spadnie poniżej połowy (s należy do \mbox{[}0, ½\-S\mbox{]}), to osobnik znajduje się w stanie „zmęczony”
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli głodny osobnik dotrze do kryjówki, jego poziom napojenia energii rośnie do poziomu S, ale jednocześnie zapada on w sen trwający stały czas T\-S
\end{DoxyItemize}


\begin{DoxyItemize}
\item W czasie snu osobnik nie porusza się, jest niewidoczny dla innych osobników, ale może zostać zjedzony przez drapieżnika, który akurat wejdzie do tej samej kryjówki
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli poziom energii spadnie do zera, osobnik umiera z wycieńczenia Poziom energii maleje dwa razy szybciej podczas biegu
\end{DoxyItemize}

\paragraph*{Poziom zaspokojenia reprodukcyjnego}

Czas do reprodukcji (p), p należy do \mbox{[}0, 1\mbox{]}, maleje w stałym tempie (zależnym od wartości P)


\begin{DoxyItemize}
\item Jeśli {\ttfamily p = 0}, to osobnik może się rozmnażać; po akcie „kopulacji” wartość {\ttfamily p} jest ustawiana na 1
\end{DoxyItemize}


\begin{DoxyItemize}
\item Wartość ta maleje w tempie {\ttfamily P/1000} na sekundę (czyli osobnik o najwyższej możliwej zdolności reprodukcyjnej {\ttfamily P = 100} będzie „pauzować” 10 sekund, a o najniższej możliwej {\ttfamily P = 5}, będzie „pauzować” 200 sekund)
\end{DoxyItemize}

\paragraph*{Wiek}

Wiek (l), l należy do \mbox{[}0, L\mbox{]}, rośnie w stałym tempie


\begin{DoxyItemize}
\item Przy narodzinach jest ustawiane {\ttfamily l = 0}, po osiągnięciu {\ttfamily l = L} osobnik umiera ze starości
\end{DoxyItemize}

\subsubsection*{Zachowanie osobników}

Każdy osobnik porusza się po planszy w sposób losowy, dopóki w jego polu widzenia (okrąg o promieniu R) nie znajdzie się jakiś interesujący go obiekt\-:


\begin{DoxyItemize}
\item Jeśli w polu widzenia osobnika znajduje się jaskinia i osobnik jest zmęczony, to idzie w stronę wodopoju – priorytet 1
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli w polu widzenia osobnika znajduje się drzewo, osobnik jest głodny i jest roślinożercą, to osobnik idzie w stronę drzewa – priorytet 2
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli w polu widzenia osobnika znajduje się wodopój i osobnik jest spragniony, to osobnik idzie w stronę wodopoju – priorytet 3
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli w polu widzenia osobnika znajduje się drugi osobnik tego samego gatunku i przeciwnej płci oraz oba te osobniki mają p=0 (są gotowe do reprodukcji) oraz żaden z nich nie jest głodny, spragniony, ani zmęczony, to osobniki idą w swoim kierunku – priorytet 4
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli w polu widzenia osobnika znajduje się roślinożerca, osobnik jest głodny i jest drapieżnikiem, to osobnik biegnie w stronę roślinożercy (poluje) – priorytet 5
\end{DoxyItemize}


\begin{DoxyItemize}
\item Jeśli w polu widzenia osobnika znajduje się drapieżnik i osobnik jest roślinożercą, to osobnik biegnie w stronę przeciwną (ucieka), niezależnie od tego, czy drapieżnik jest głodny – priorytet 5
\end{DoxyItemize}

Jakieś zachowania społeczne – osobniki mogą trzymać się innych osobników swojego gatunku, wspólnie polować etc – tylko nie mam pojęcia, jak to realizować

Jeśli w zasięgu wzroku osobnika znajduje się kilka interesujących obiektów, to wybiera akcję o najwyższym priorytecie (najpierw polowanie / ucieczka itd)

\paragraph*{Rozmnażanie}

Jeśli dwa osobniki tego samego gatunku i różnych płci spotkają się, następuje akt prokreacji – pojawia się nowy osobnik, którego cechy (R, V, F, W, S, P, L) wynikają z odpowiednich cech rodziców\-:

{\ttfamily R\-D\-Z\-I\-E\-C\-K\-A = random(\-R\-O\-J\-C\-A, R\-M\-A\-T\-K\-I) + random(-\/10, 10)}

(analogicznie dla pozostałych cech) gdzie {\ttfamily random(a,b)} jest funkcją zwracającą losową wartość z zakresu {\ttfamily \mbox{[}min(a,b);max(a,b)\mbox{]}} Cechy są skalowane w taki sposób, aby spełniały warunki\-: {\ttfamily R+\-V+\-F+\-W+\-S+\-P+\-L=200; R, V, F, W, S, P, L należy do \mbox{[}5, 100\mbox{]}}

\subsubsection*{Możliwości modyfikacji scenariusza}

Na ekranie startowym użytkownik może ustalić pewne parametry symulacji, takie jak\-:


\begin{DoxyItemize}
\item wielkość planszy
\end{DoxyItemize}


\begin{DoxyItemize}
\item gęstość rozmieszczenia drzew, wodopojów, skał, ilość drapieżników i roślinożerców etc,
\end{DoxyItemize}

Może także wpłynąć na określone cechy całej populacji (np dodać wszystkim roślinożercom +30 do szybkości)

Do programu będzie też dołączonych kilka (wybranych przez twórców gry) ciekawych scenariuszy

\subsubsection*{Wizualizacja}

Osobniki i inne obiekty będą reprezentowane przez proste figury geometryczne, po najechaniu myszką na obiekt wyświetli się więcej informacji o nim 